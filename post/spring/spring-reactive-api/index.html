<!DOCTYPE html>
<html
  dir="ltr"
  lang="ko"
  data-theme="dark"
  class="html"
><head>
  <title>
    
      
        [ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ |

      
      lhj8390


    
  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.100.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="lhj8390" />
  <meta
    name="description"
    content="
      ìŠ¤í”„ë§ì—ì„œ ë¦¬ì•¡í‹°ë¸Œ APIë¥¼ ê°œë°œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.


    "
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.2f604df480f84ff6415fc685caa908ddcb87c745baa11def4a91b709d56fb43e.css"
      integrity="sha256-L2BN9ID4T/ZBX8aFyqkI3cuHx0W6oR3vSpG3CdVvtD4="
      crossorigin="anonymous"
      type="text/css"
    />

  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.b374260bc49a52bc6d0976d7bd23c96fae00552bcf5ae5cd91d58c4b6cb427bc.css"
    integrity="sha256-s3QmC8SaUrxtCXbXvSPJb64AVSvPWuXNkdWMS2y0J7w="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link rel="stylesheet" href="/fontawesome/css/fontawesome.min.1d14c463c20786ac959f4bd98e0ddc6056d936223bfc1dcbe7825ddc176121c1.css" integrity="" crossorigin="anonymous" type="text/css" />
  
  <link rel="stylesheet" href="/fontawesome/css/solid.min.dbef5d0848ad38377fc1031d9a05829ad77d1cdd54177a1e7063905b0876018a.css" integrity="" crossorigin="anonymous" type="text/css" />
  
  <link rel="stylesheet" href="/fontawesome/css/brands.min.bd884e18f3674c4c3ae3e69a8a6d7d29b822c5638132c1dc845abec77e955c3f.css" integrity="" crossorigin="anonymous" type="text/css" />
  
    
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fira&#43;Code&amp;display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/font/font.33b216bf2ce0242fb770f85d02cdcb6ddf9205b13dc01fba22dce3be9658cc28.css" integrity="" crossorigin="anonymous" type="text/css" />

  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="https://lhj8390.github.io/post/spring/spring-reactive-api/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.7a513c87595b64079c749049bbefff5a20a8d88467b9d5e813e33bfcd29880de.js"
    integrity="sha256-elE8h1lbZAecdJBJu&#43;//WiCo2IRnudXoE&#43;M7/NKYgN4="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.1d1e60dd5031959e835e253306615c60139c78c47abbc27e3ef3e28bf82098b4.js"
      integrity="sha256-HR5g3VAxlZ6DXiUzBmFcYBOceMR6u8J&#43;PvPii/ggmLQ="
      crossorigin="anonymous"
    ></script>

  

  <link crossorigin="anonymous" rel="preload" as="fetch" href="/index.json">
  <script defer crossorigin="anonymous" src="/assets/js/search.min.5c2d8adfb9cfbaa7936df065fd4f32f3137c1877a2fe15478d3ffb1a69db1471.js" integrity="sha256-XC2K37nPuqeTbfBl/U8y8xN8GHei/hVHjT/7GmnbFHE="></script>

  


  
  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://lhj8390.github.io/images/site-feature-image.png"/>

<meta name="twitter:title" content="[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ"/>
<meta name="twitter:description" content="ìŠ¤í”„ë§ì—ì„œ ë¦¬ì•¡í‹°ë¸Œ APIë¥¼ ê°œë°œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤."/>



  
  <meta property="og:title" content="[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ" />
<meta property="og:description" content="ìŠ¤í”„ë§ì—ì„œ ë¦¬ì•¡í‹°ë¸Œ APIë¥¼ ê°œë°œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lhj8390.github.io/post/spring/spring-reactive-api/" /><meta property="og:image" content="https://lhj8390.github.io/images/site-feature-image.png"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-08-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-08-19T00:00:00+00:00" /><meta property="og:site_name" content="lhj8390" />





  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "post",
        "name": "[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ",
        "headline": "[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ",
        "alternativeHeadline": "",
        "description": "
      ìŠ¤í”„ë§ì—ì„œ ë¦¬ì•¡í‹°ë¸Œ APIë¥¼ ê°œë°œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.


    ",
        "inLanguage": "ko",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/lhj8390.github.io\/post\/spring\/spring-reactive-api\/"
        },
        "author" : {
            "@type": "Person",
            "name": "lhj8390"
        },
        "creator" : {
            "@type": "Person",
            "name": "lhj8390"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "lhj8390"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "lhj8390"
        },
        "copyrightYear" : "2022",
        "dateCreated": "2022-08-19T00:00:00.00Z",
        "datePublished": "2022-08-19T00:00:00.00Z",
        "dateModified": "2022-08-19T00:00:00.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "lhj8390",
            "url": "https://lhj8390.github.io/",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/lhj8390.github.io\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
        
        "https://lhj8390.github.io/images/site-feature-image.png"


      
      ]

    ,
        "url" : "https:\/\/lhj8390.github.io\/post\/spring\/spring-reactive-api\/",
        "wordCount" : "1510",
        "genre" : [ 
      
      "Web"

    ],
        "keywords" : [ 
      
      "spring"

    
      
        ,

      
      "web"

    
      
        ,

      
      "java"

    
      
        ,

      
      "spring boot"

    ]
    }
  </script>



</head>
<body
    
      class="body theme--dark"

    
  >
    <div class="wrapper">
      <div class="search search--wrapper" id="searchWrapper" style="display: none;" onclick="openSearchPopup(event);">
        <div id="searchbox">
          <input id="searchInput" autofocus placeholder="search"
              aria-label="search" type="search" autocomplete="off">
          <ul id="searchResults" aria-label="search results"></ul>
        </div>
      </div>
      <aside
        
          class="wrapper__sidebar"

        
      ><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/cow.png"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">lhj8390</a>
        </div>

      
      <div class="sidebar__introduction-description">
        <p>ë¸”ë¡œê·¸</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://de.linkedin.com/"
            target="_blank"
            rel="noopener"
            aria-label="Linkedin"
            title="Linkedin"
          >
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/lhj8390/"
            target="_blank"
            rel="noopener"
            aria-label="GitHub"
            title="GitHub"
          >
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a
            href="mailto:mail@example.com"
            target="_blank"
            rel="noopener"
            aria-label="e-mail"
            title="e-mail"
          >
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  
    <div class="nav__list categories">
      
      
      
      
        <a href="/categories/architecture" class="">
          
            <i class="fa-solid fa-sitemap"></i>
          
          Architecture 
          <span>(1)</span>
          <div class="icon down">
            <i class="fa-solid fa-angle-down"></i>
          </div>
        </a>
        
        
            <div class="expand__list">
              
              <a href="/subcategories/design-pattern" class="">
                
                  <i class="fa-solid fa-diagram-project"></i>
                
                Design pattern
              </a>
              
            </div>
         
        
      
        <a href="/categories/devops" class="">
          
            <i class="fa-solid fa-infinity"></i>
          
          Devops 
          <span>(5)</span>
          <div class="icon down">
            <i class="fa-solid fa-angle-down"></i>
          </div>
        </a>
        
        
            <div class="expand__list">
              
              <a href="/subcategories/kubernetes" class="">
                
                  <i class="fa-solid fa-dharmachakra"></i>
                
                Kubernetes
              </a>
              
              <a href="/subcategories/docker" class="">
                
                  <i class="fa-brands fa-docker"></i>
                
                Docker
              </a>
              
              <a href="/subcategories/server" class="">
                
                  <i class="fa-solid fa-server"></i>
                
                Server
              </a>
              
            </div>
         
        
      
        <a href="/categories/language" class="">
          
            <i class="fa-solid fa-code"></i>
          
          Language 
          <span>(6)</span>
          <div class="icon down">
            <i class="fa-solid fa-angle-down"></i>
          </div>
        </a>
        
        
            <div class="expand__list">
              
              <a href="/subcategories/go" class="">
                
                  <i class="fa-brands fa-golang"></i>
                
                Go
              </a>
              
            </div>
         
        
      
        <a href="/categories/web" class="">
          
            <i class="fa-solid fa-desktop"></i>
          
          Web 
          <span>(25)</span>
          <div class="icon down">
            <i class="fa-solid fa-angle-down"></i>
          </div>
        </a>
        
        
            <div class="expand__list">
              
              <a href="/subcategories/spring" class="">
                
                  <i class="fa-solid fa-leaf"></i>
                
                Spring
              </a>
              
              <a href="/subcategories/react" class="">
                
                  <i class="fa-brands fa-react"></i>
                
                React
              </a>
              
            </div>
         
        
      
    </div>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        lhj8390
        2023


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.972a2c29b7a36a3c40cc4798c8fab0dbae92c1089ab0691e84acbf0c7720ccb3.js"
    integrity="sha256-lyosKbejajxAzEeYyPqw266SwQiasGkehKy/DHcgzLM="
    crossorigin="anonymous"
  ></script></div>
<script>
  const arrows = document.getElementsByClassName('down');
  for (i = 0; i < arrows.length ; i++) {
    arrows[i].addEventListener('click', function(e) {
      e.preventDefault();
      console.log(this);
      this.classList.toggle('up');
      this.classList.toggle('down');
      this.parentNode.nextElementSibling.classList.toggle('expand--open');
    });
  }

  
</script>
</aside>
      <main
        
          class="wrapper__main"

        
      >
        <header class="header"><div
  class="menu 
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <a role="button" id="searchIcon" class="search__icon" aria-label="search" onclick="openSearchPopup(event);">
    <em class="fa-solid fa-magnifying-glass"></em>
    <span>Search..</span>
  </a>
  <nav class="nav">
     
    <div class="nav__opener">
      <div class="nav__list" id="navMenu">
        
        
        
        
        
          <a class="nav__list-item" onclick="openMenu(this);">
            
              <i class="fa-solid fa-sitemap"></i>
            
            Architecture 
            <span>(1)</span>
          </a>
          
          
              <div class="expand__list">
                
                <a href="/subcategories/design-pattern" class="">
                  
                    <i class="fa-solid fa-diagram-project"></i>
                  
                  Design pattern
                </a>
                
              </div>
          
          
        
          <a class="nav__list-item" onclick="openMenu(this);">
            
              <i class="fa-solid fa-infinity"></i>
            
            Devops 
            <span>(5)</span>
          </a>
          
          
              <div class="expand__list">
                
                <a href="/subcategories/kubernetes" class="">
                  
                    <i class="fa-solid fa-dharmachakra"></i>
                  
                  Kubernetes
                </a>
                
                <a href="/subcategories/docker" class="">
                  
                    <i class="fa-brands fa-docker"></i>
                  
                  Docker
                </a>
                
                <a href="/subcategories/server" class="">
                  
                    <i class="fa-solid fa-server"></i>
                  
                  Server
                </a>
                
              </div>
          
          
        
          <a class="nav__list-item" onclick="openMenu(this);">
            
              <i class="fa-solid fa-code"></i>
            
            Language 
            <span>(6)</span>
          </a>
          
          
              <div class="expand__list">
                
                <a href="/subcategories/go" class="">
                  
                    <i class="fa-brands fa-golang"></i>
                  
                  Go
                </a>
                
              </div>
          
          
        
          <a class="nav__list-item" onclick="openMenu(this);">
            
              <i class="fa-solid fa-desktop"></i>
            
            Web 
            <span>(25)</span>
          </a>
          
          
              <div class="expand__list">
                
                <a href="/subcategories/spring" class=" watched ">
                  
                    <i class="fa-solid fa-leaf"></i>
                  
                  Spring
                </a>
                
                <a href="/subcategories/react" class=" watched ">
                  
                    <i class="fa-brands fa-react"></i>
                  
                  React
                </a>
                
              </div>
          
          
        
      </div>
    </div>
    
  </nav>
  <nav class="nav nav--hidden">
    <ul class="nav__list">
      
      
        
        
          <li class="nav__list-item">
            <a
              
              href="/"
              
              title=""
              >í™ˆ</a
            >
          </li>

        


      
        
        
          <li class="nav__list-item">
            <a
              
              href="/post/"
              
              title=""
              >ê²Œì‹œë¬¼</a
            >
          </li>

        


      
    </ul>
    <ul class="nav__list nav__list--end">
      
      <li>
        
      </li>
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>

      
    </ul>
  </nav>
</div>

</header>
  <div
    class="post 
      animated fadeInDown

    "
  >
    
      <div class="post__thumbnail-wrapper">
        <img class="post__thumbnail" src="/images/spring-basic.png" alt="Thumbnail image" />
      </div>

    

    <div class="post__toc" id="tableOfContent">
      <h3>Table of Contents</h3>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#ê°œìš”">ê°œìš”</a></li>
    <li><a href="#webflux-ì‚¬ìš©">WebFlux ì‚¬ìš©</a>
      <ul>
        <li><a href="#webflux-ë¹Œë“œ-ëª…ì„¸-ì¶”ê°€">WebFlux ë¹Œë“œ ëª…ì„¸ ì¶”ê°€</a></li>
        <li><a href="#ë¦¬ì•¡í‹°ë¸Œ-ì»¨íŠ¸ë¡¤ëŸ¬-ìƒì„±">ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±</a></li>
      </ul>
    </li>
    <li><a href="#í•¨ìˆ˜í˜•-ìš”ì²­-í•¸ë“¤ëŸ¬-ì •ì˜">í•¨ìˆ˜í˜• ìš”ì²­ í•¸ë“¤ëŸ¬ ì •ì˜</a>
      <ul>
        <li><a href="#ê¸°ë³¸-ì˜ˆì œ">ê¸°ë³¸ ì˜ˆì œ</a></li>
        <li><a href="#í•¨ìˆ˜í˜•-ë°©ì‹ì„-ì‚¬ìš©í•˜ì—¬-ì»¨íŠ¸ë¡¤ëŸ¬-ìƒì„±">í•¨ìˆ˜í˜• ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±</a></li>
      </ul>
    </li>
    <li><a href="#ë¦¬ì•¡í‹°ë¸Œ-ì»¨íŠ¸ë¡¤ëŸ¬-í…ŒìŠ¤íŠ¸">ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸</a>
      <ul>
        <li><a href="#get-ìš”ì²­-í…ŒìŠ¤íŠ¸">GET ìš”ì²­ í…ŒìŠ¤íŠ¸</a></li>
        <li><a href="#post-ìš”ì²­-í…ŒìŠ¤íŠ¸">POST ìš”ì²­ í…ŒìŠ¤íŠ¸</a></li>
        <li><a href="#ì‹¤í–‰-ì¤‘ì¸-ì„œë²„ë¡œ-í…ŒìŠ¤íŠ¸">ì‹¤í–‰ ì¤‘ì¸ ì„œë²„ë¡œ í…ŒìŠ¤íŠ¸</a></li>
      </ul>
    </li>
    <li><a href="#rest-api-ì‚¬ìš©">REST API ì‚¬ìš©</a>
      <ul>
        <li><a href="#get-ì‚¬ìš©">GET ì‚¬ìš©</a></li>
        <li><a href="#ë¦¬ì†ŒìŠ¤-ì „ì†¡">ë¦¬ì†ŒìŠ¤ ì „ì†¡</a></li>
        <li><a href="#ë¦¬ì†ŒìŠ¤-ì‚­ì œ">ë¦¬ì†ŒìŠ¤ ì‚­ì œ</a></li>
        <li><a href="#ì—ëŸ¬-ì²˜ë¦¬">ì—ëŸ¬ ì²˜ë¦¬</a></li>
        <li><a href="#ìš”ì²­-êµí™˜">ìš”ì²­ êµí™˜</a></li>
      </ul>
    </li>
    <li><a href="#ë¦¬ì•¡í‹°ë¸Œ-ì›¹-api-ë³´ì•ˆ">ë¦¬ì•¡í‹°ë¸Œ ì›¹ API ë³´ì•ˆ</a>
      <ul>
        <li><a href="#ë¦¬ì•¡í‹°ë¸Œ-ì›¹-ë³´ì•ˆ-êµ¬ì„±">ë¦¬ì•¡í‹°ë¸Œ ì›¹ ë³´ì•ˆ êµ¬ì„±</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
    <div class="post__content detail">
      <h1>[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ</h1>
      
        <ul class="post__meta">
          <li class="post__meta-item">
            <em class="fas fa-calendar-day post__meta-icon"></em>
            <span class="post__meta-text"
              >
                19/8/2022


              
            </span>
          </li>
          <li class="post__meta-item">
            <em class="fas fa-stopwatch post__meta-icon"></em>
            <span class="post__meta-text">ì½ëŠ” ì‹œê°„ 8ë¶„</span>
          </li>
        </ul>

      <h2 id="ê°œìš”">ê°œìš”</h2>
<hr>
<blockquote>
<p>ìŠ¤í”„ë§ì¸ì•¡ì…˜ 11ì¥ì„ ì½ê³  ë¦¬ì•¡í‹°ë¸Œ WebFluxë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì•¡í‹°ë¸Œ APIë¥¼ ê°œë°œí•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê³µë¶€í•˜ì˜€ë‹¤.</p>
<ul>
<li>ìŠ¤í”„ë§ WebFlux ì‚¬ìš©í•˜ê¸°</li>
<li>ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ í´ë¼ì´ì–¸íŠ¸ ì‘ì„± ë° í…ŒìŠ¤íŠ¸</li>
<li>REST API ì†Œë¹„í•˜ê¸°</li>
<li>ë¦¬ì•¡í‹°ë¸Œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ</li>
</ul>
<p>ì— ëŒ€í•´ ì‘ì„±í•˜ì˜€ë‹¤.</p>
</blockquote>
<h2 id="webflux-ì‚¬ìš©">WebFlux ì‚¬ìš©</h2>
<hr>
<blockquote>
<p>ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬ëŠ” ì ì€ ìˆ˜ì˜ ìŠ¤ë ˆë“œë¡œ ë†’ì€ í™•ì¥ì„±ì„ ê°€ì§€ê³  ìˆë‹¤. <br/>
<strong>ì´ë²¤íŠ¸ ë£¨í•‘</strong>ì´ë¼ëŠ” ê¸°ë²•ì„ ì ìš©í•˜ì—¬ í•œ ìŠ¤ë ˆë“œ ë‹¹ ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ì„œ ìŠ¤ë ˆë“œ ê´€ë¦¬ ë¶€ë‹´ì´ ì¤„ì–´ë“¤ê³  í™•ì¥ì´ ìš©ì´í•˜ë‹¤.</p>
<figure class="large"><img src="/images/spring-reactive-api/1.png"
         alt="ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬ëŠ” ì´ë²¤íŠ¸ ë£¨í•‘ì„ í†µí•´ ì ì€ ìˆ˜ì˜ ìŠ¤ë ˆë“œë¡œ ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤."/><figcaption>
            <p>ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬ëŠ” ì´ë²¤íŠ¸ ë£¨í•‘ì„ í†µí•´ ì ì€ ìˆ˜ì˜ ìŠ¤ë ˆë“œë¡œ ë§ì€ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.</p>
        </figcaption>
</figure>

<p>ìŠ¤í”„ë§ 5ì—ì„œëŠ” í”„ë¡œì íŠ¸ ë¦¬ì•¡í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬ì¸ ìŠ¤í”„ë§ WebFluxê°€ ì¡´ì¬í•œë‹¤.</p>
</blockquote>
<h3 id="webflux-ë¹Œë“œ-ëª…ì„¸-ì¶”ê°€">WebFlux ë¹Œë“œ ëª…ì„¸ ì¶”ê°€</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="ln" id="hl-0-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-1">1</a></span><span class="cl"><span class="n">implementation</span> <span class="s1">&#39;org.springframework.boot:spring-boot-starter-webflux&#39;</span>
</span></span></code></pre></div><p>ìŠ¤í”„ë§ WebFluxë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” <code>spring-boot-starter-web</code> ëŒ€ì‹  ìŠ¤í”„ë§ ë¶€íŠ¸ WebFlux ìŠ¤íƒ€í„° dependencyë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.
WebFluxë¥¼ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” ë‚´ì¥ ì„œë²„ê°€ í†°ìº£ ëŒ€ì‹  Nettyê°€ ëœë‹¤.</p>
<aside>
ğŸ’¡ <strong>Netty</strong> : ë¹„ë™ê¸°ì ì¸ ì´ë²¤íŠ¸ ì¤‘ì‹¬ì˜ ì„œë²„ ì¤‘ í•˜ë‚˜<br/>
</aside>
<h3 id="ë¦¬ì•¡í‹°ë¸Œ-ì»¨íŠ¸ë¡¤ëŸ¬-ìƒì„±">ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±</h3>
<p>ë¦¬ì•¡í‹°ë¸Œ íƒ€ì…ì¸ Flux ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ìƒì„±í•œë‹¤.
WebFlux ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” Fluxì™€ ê°™ì€ ë¦¬ì•¡í‹°ë¸Œ íƒ€ì…ì„ ë°›ì„ ë•Œ í”„ë ˆì„ì›Œí¬ì—ì„œ subscirbe()ë¥¼ í˜¸ì¶œí•´ì£¼ê¸° ë•Œë¬¸ì— ë³„ë„ë¡œ subscirbe()ë¥¼ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ë‹¤.<br/><br/></p>
<p><strong>End-to-End ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íƒ</strong></p>
<figure class="large"><img src="/images/spring-reactive-api/2.png"/>
</figure>

<p>ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¦¬ì•¡í‹°ë¸Œ End-to-End ìŠ¤íƒì˜ ì œì¼ ëì— ìœ„ì¹˜í•´ì•¼ í•˜ë©° ë¦¬í¼ì§€í„°ë¦¬ì—ì„œ Fluxë¥¼ ë°˜í™˜í•˜ë„ë¡ ì‘ì„±ë˜ì–´ì•¼ í•œë‹¤.<br/><br/></p>
<p><strong>ê¸°ë³¸ ì˜ˆì œ</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-1-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-1">1</a></span><span class="cl"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/recent&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-1-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-2">2</a></span><span class="cl"><span class="kd">public</span> <span class="n">Flux</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="nf">recentTacos</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-1-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-3">3</a></span><span class="cl">    <span class="k">return</span> <span class="n">tacoRepo</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">take</span><span class="o">(</span><span class="n">12</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-1-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-4">4</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•´ take() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œ ì˜ˆì œì´ë‹¤. (repositoryì—ì„œ Flux íƒ€ì… ë°˜í™˜)<br/><br/></p>
<p><strong>RxJava íƒ€ì… ì‚¬ìš©</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-2-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-1">1</a></span><span class="cl"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/recent&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-2-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-2">2</a></span><span class="cl"><span class="kd">public</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="nf">recentTacos</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-2-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-3">3</a></span><span class="cl">    <span class="k">return</span> <span class="n">tacoService</span><span class="o">.</span><span class="na">getRecentTacos</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-2-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-4">4</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>ìŠ¤í”„ë§ WebFluxë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” Observableì´ë‚˜ Single ê°™ì€ Rxjava íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì´ë¿ë§Œ ì•„ë‹ˆë¼ ë¦¬ì•¡í„°ì˜ Mono íƒ€ì…ê³¼ ë™ì¼í•œ Rxjavaì˜ Completable íƒ€ì…, Observableì´ë‚˜ Flux íƒ€ì…ì˜ ëŒ€ì•ˆìœ¼ë¡œ Flowable íƒ€ì…ì„ ë°˜í™˜í•  ìˆ˜ë„ ìˆë‹¤.<br/><br/></p>
<p><strong>ì…ë ¥ì²˜ë¦¬</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-3-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-1">1</a></span><span class="cl"><span class="nd">@PostMapping</span><span class="o">(</span><span class="n">consumes</span> <span class="o">=</span> <span class="s">&#34;application/json&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-3-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-2">2</a></span><span class="cl"><span class="nd">@ResponseStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-3-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-3">3</a></span><span class="cl"><span class="kd">public</span> <span class="n">Mono</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="nf">postTaco</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Mono</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="n">tacoMono</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-3-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-4">4</a></span><span class="cl">  <span class="k">return</span> <span class="n">tacoRepo</span><span class="o">.</span><span class="na">saveAll</span><span class="o">(</span><span class="n">tacoMono</span><span class="o">).</span><span class="na">next</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-3-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-5">5</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ ë©”ì„œë“œì˜ ì…ë ¥ìœ¼ë¡œ Monoë‚˜ Flux íƒ€ì…ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.<br/>
saveAll() ë©”ì„œë“œëŠ” ë¦¬ì•¡í‹°ë¸Œ ìŠ¤íŠ¸ë¦¼ì˜ Publisher ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ íƒ€ì…(Mono, Flux)ì„ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>
<ul>
<li><strong>next()</strong> : saveAll() ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” Fluxê°€ í•˜ë‚˜ì˜ ê°ì²´ë§Œ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ë©”ì„œë“œë¥¼ í†µí•´ <span class="red">Mono íƒ€ì… ê°ì²´ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</span></li>
</ul>
<p><em>â€œMVC íŒ¨í„´ê³¼ ë‹¤ë¥´ê²Œ requestBodyë¡œë¶€í„° ê°ì²´ê°€ ë¶„ì„ë˜ì§€ ì•Šê³  ì¦‰ì‹œ í˜¸ì¶œëœë‹¤.â€</em></p>
<h2 id="í•¨ìˆ˜í˜•-ìš”ì²­-í•¸ë“¤ëŸ¬-ì •ì˜">í•¨ìˆ˜í˜• ìš”ì²­ í•¸ë“¤ëŸ¬ ì •ì˜</h2>
<hr>
<blockquote>
<p>MVCë‚˜ WebFlux ê°™ì€ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ í”„ë¡œê·¸ë˜ë°ì˜ ë‹¨ì (í™•ì¥, ë””ë²„ê¹…ì˜ ì–´ë ¤ì›€)ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ë¦¬ì•¡í‹°ë¸Œ APIë¥¼ ì •ì˜í•˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ëª¨ë¸ì´ ì¡´ì¬í•œë‹¤.</p>
</blockquote>
<p><strong>í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ëª¨ë¸ ê¸°ë³¸ íƒ€ì…</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>RequestPredicate</td>
<td>ì²˜ë¦¬ë  ìš”ì²­ì˜ ì¢…ë¥˜ ì„ ì–¸</td>
</tr>
<tr>
<td>RouterFunction</td>
<td>ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì´ ì–´ë–»ê²Œ í•¸ë“¤ëŸ¬ì—ê²Œ ì „ë‹¬ë˜ëŠ”ì§€ ì„ ì–¸</td>
</tr>
<tr>
<td>ServerRequest</td>
<td>HTTP ìš”ì²­ì„ ë‚˜íƒ€ë‚´ë©°, headerì™€ body ì •ë³´ ì‚¬ìš©</td>
</tr>
<tr>
<td>ServerResponse</td>
<td>HTTP ì‘ë‹µì„ ë‚˜íƒ€ë‚´ë©°, headerì™€ body ì •ë³´ í¬í•¨</td>
</tr>
</tbody>
</table>
<h3 id="ê¸°ë³¸-ì˜ˆì œ">ê¸°ë³¸ ì˜ˆì œ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-4-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-1"> 1</a></span><span class="cl"><span class="kn">import static</span> <span class="nn">org.springframework.web.reactive.function.server.RequestPredicates.GET</span><span class="o">;</span>
</span></span><span class="line"><span class="ln" id="hl-4-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-2"> 2</a></span><span class="cl"><span class="kn">import static</span> <span class="nn">org.springframework.web.reactive.function.server.RouterFunctions.route</span><span class="o">;</span>
</span></span><span class="line"><span class="ln" id="hl-4-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-3"> 3</a></span><span class="cl"><span class="kn">import static</span> <span class="nn">org.springframework.web.reactive.function.server.ServerResponse.ok</span><span class="o">;</span>
</span></span><span class="line"><span class="ln" id="hl-4-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-4"> 4</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-4-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-5"> 5</a></span><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="ln" id="hl-4-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-6"> 6</a></span><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RouterFunctionConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-4-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-7"> 7</a></span><span class="cl">  <span class="nd">@Bean</span>
</span></span><span class="line"><span class="ln" id="hl-4-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-8"> 8</a></span><span class="cl">  <span class="kd">public</span> <span class="n">RouterFunction</span><span class="o">&lt;?&gt;</span> <span class="n">helloRouterFunction</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-4-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-9"> 9</a></span><span class="cl">    <span class="k">return</span> <span class="n">route</span><span class="o">(</span><span class="n">GET</span><span class="o">(</span><span class="s">&#34;/hello&#34;</span><span class="o">),</span> 
</span></span><span class="line"><span class="ln" id="hl-4-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-10">10</a></span><span class="cl">        <span class="n">request</span> <span class="o">-&gt;</span> <span class="n">ok</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="n">just</span><span class="o">(</span><span class="s">&#34;Hello!&#34;</span><span class="o">),</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>
</span></span><span class="line"><span class="ln" id="hl-4-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-11">11</a></span><span class="cl">        <span class="o">.</span><span class="na">andRoute</span><span class="o">(</span><span class="n">GET</span><span class="o">(</span><span class="s">&#34;/bye&#34;</span><span class="o">),</span>
</span></span><span class="line"><span class="ln" id="hl-4-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-12">12</a></span><span class="cl">        <span class="n">request</span> <span class="o">-&gt;</span> <span class="n">ok</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="n">just</span><span class="o">(</span><span class="s">&#34;See ya!&#34;</span><span class="o">),</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</span></span><span class="line"><span class="ln" id="hl-4-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-13">13</a></span><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-4-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-14">14</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>í•¨ìˆ˜í˜• íƒ€ì…ì„ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ë„ìš°ë¯¸ í´ë˜ìŠ¤ë¥¼ static importí•œë‹¤.<br/>
route() ë©”ì„œë“œëŠ” (1) <span class="ul">RequestPredicate ê°ì²´</span>ì™€ (2) <span class="ul">ì¼ì¹˜í•˜ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜</span>, ë‘ ê°€ì§€ ì¸ìë¥¼ ê°€ì§„ë‹¤.</p>
<p>ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•´ì•¼ í•  ê²½ìš°ëŠ” <strong>andRoute() ë©”ì„œë“œ</strong>ë¥¼ í˜¸ì¶œí•œë‹¤.</p>
<h3 id="í•¨ìˆ˜í˜•-ë°©ì‹ì„-ì‚¬ìš©í•˜ì—¬-ì»¨íŠ¸ë¡¤ëŸ¬-ìƒì„±">í•¨ìˆ˜í˜• ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„±</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-5-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-1"> 1</a></span><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="ln" id="hl-5-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-2"> 2</a></span><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RouterFunctionConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-5-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-3"> 3</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-5-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-4"> 4</a></span><span class="cl">  <span class="nd">@Autowired</span>
</span></span><span class="line"><span class="ln" id="hl-5-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-5"> 5</a></span><span class="cl">  <span class="kd">private</span> <span class="n">TacoRepository</span> <span class="n">tacoRepo</span><span class="o">;</span>
</span></span><span class="line"><span class="ln" id="hl-5-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-6"> 6</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-5-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-7"> 7</a></span><span class="cl">  <span class="nd">@Bean</span>
</span></span><span class="line"><span class="ln" id="hl-5-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-8"> 8</a></span><span class="cl">  <span class="kd">public</span> <span class="n">RouterFunction</span><span class="o">&lt;?&gt;</span> <span class="n">routerFunction</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-5-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-9"> 9</a></span><span class="cl">    <span class="k">return</span> <span class="n">route</span><span class="o">(</span><span class="n">GET</span><span class="o">(</span><span class="s">&#34;/design/taco&#34;</span><span class="o">),</span> <span class="k">this</span><span class="o">::</span><span class="n">recents</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-5-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-10">10</a></span><span class="cl">        <span class="o">.</span><span class="na">andRoute</span><span class="o">(</span><span class="n">POST</span><span class="o">(</span><span class="s">&#34;/design&#34;</span><span class="o">),</span> <span class="k">this</span><span class="o">::</span><span class="n">postTaco</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-5-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-11">11</a></span><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-5-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-12">12</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-5-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-13">13</a></span><span class="cl">  <span class="kd">public</span> <span class="n">Mono</span><span class="o">&lt;</span><span class="n">ServerResponse</span><span class="o">&gt;</span> <span class="nf">recents</span><span class="o">(</span><span class="n">ServerRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-5-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-14">14</a></span><span class="cl">    <span class="k">return</span> <span class="n">ServerResponse</span><span class="o">.</span><span class="na">ok</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="n">tacoRepo</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">take</span><span class="o">(</span><span class="n">12</span><span class="o">),</span> <span class="n">Taco</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-5-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-15">15</a></span><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-5-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-16">16</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-5-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-17">17</a></span><span class="cl">  <span class="kd">public</span> <span class="n">Mono</span><span class="o">&lt;</span><span class="n">ServerResponse</span><span class="o">&gt;</span> <span class="nf">postTaco</span><span class="o">(</span><span class="n">ServerRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-5-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-18">18</a></span><span class="cl">    <span class="n">Mono</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="n">taco</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Taco</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-5-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-19">19</a></span><span class="cl">    <span class="n">Mono</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="n">savedTaco</span> <span class="o">=</span> <span class="n">tacoRepo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">taco</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-5-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-20">20</a></span><span class="cl">    <span class="k">return</span> <span class="n">ServerResponse</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">URI</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/design/taco/&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="ln" id="hl-5-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-21">21</a></span><span class="cl">        <span class="n">savedTaco</span><span class="o">.</span><span class="na">getId</span><span class="o">()))</span>
</span></span><span class="line"><span class="ln" id="hl-5-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-22">22</a></span><span class="cl">        <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">savedTaco</span><span class="o">,</span> <span class="n">Taco</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-5-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-23">23</a></span><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-5-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-24">24</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p><code>/design/taco GET</code> ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ê²½ìš° recents() ë©”ì„œë“œì—ì„œ ì²˜ë¦¬ë˜ê³ , <code>/design POST</code> ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ê²½ìš° postTaco() ë©”ì„œë“œì—ì„œ ì²˜ë¦¬í•œë‹¤.</p>
<h2 id="ë¦¬ì•¡í‹°ë¸Œ-ì»¨íŠ¸ë¡¤ëŸ¬-í…ŒìŠ¤íŠ¸">ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸</h2>
<p>WebFluxë¥¼ ì‚¬ìš©í•˜ëŠ” ë¦¬ì•¡í‹°ë¸Œ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°ë¡œ <strong>WebTestClient</strong>ê°€ ìˆë‹¤.</p>
<h3 id="get-ìš”ì²­-í…ŒìŠ¤íŠ¸">GET ìš”ì²­ í…ŒìŠ¤íŠ¸</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-6-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-1"> 1</a></span><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="ln" id="hl-6-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-2"> 2</a></span><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldReturnRecentTacos</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-6-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-3"> 3</a></span><span class="cl">  <span class="n">Taco</span><span class="o">[]</span> <span class="n">tacos</span> <span class="o">=</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-6-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-4"> 4</a></span><span class="cl">      <span class="n">testTaco</span><span class="o">(</span><span class="n">1L</span><span class="o">),</span> <span class="n">testTaco</span><span class="o">(</span><span class="n">2L</span><span class="o">),</span>
</span></span><span class="line"><span class="ln" id="hl-6-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-5"> 5</a></span><span class="cl">      <span class="n">testTaco</span><span class="o">(</span><span class="n">3L</span><span class="o">),</span> <span class="n">testTaco</span><span class="o">(</span><span class="n">4L</span><span class="o">),</span>
</span></span><span class="line"><span class="ln" id="hl-6-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-6"> 6</a></span><span class="cl">      <span class="n">testTaco</span><span class="o">(</span><span class="n">5L</span><span class="o">),</span> <span class="n">testTaco</span><span class="o">(</span><span class="n">6L</span><span class="o">)};</span>      <span class="c1">// í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
</span></span></span><span class="line"><span class="ln" id="hl-6-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-7"> 7</a></span><span class="cl"><span class="c1"></span>  <span class="n">Flux</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="n">tacoFlux</span> <span class="o">=</span> <span class="n">Flux</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">tacos</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-6-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-8"> 8</a></span><span class="cl">  
</span></span><span class="line"><span class="ln" id="hl-6-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-9"> 9</a></span><span class="cl">  <span class="n">TacoRepository</span> <span class="n">tacoRepo</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">TacoRepository</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-6-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-10">10</a></span><span class="cl">  <span class="n">when</span><span class="o">(</span><span class="n">tacoRepo</span><span class="o">.</span><span class="na">findAll</span><span class="o">()).</span><span class="na">thenReturn</span><span class="o">(</span><span class="n">tacoFlux</span><span class="o">);</span>  <span class="c1">// ëª¨ì˜ TacoRepository
</span></span></span><span class="line"><span class="ln" id="hl-6-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-11">11</a></span><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="ln" id="hl-6-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-12">12</a></span><span class="cl">  <span class="n">WebTestClient</span> <span class="n">testClient</span> <span class="o">=</span> <span class="n">WebTestClient</span><span class="o">.</span><span class="na">bindToController</span><span class="o">(</span>
</span></span><span class="line"><span class="ln" id="hl-6-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-13">13</a></span><span class="cl">      <span class="k">new</span> <span class="n">DesignTacoController</span><span class="o">(</span><span class="n">tacoRepo</span><span class="o">))</span>
</span></span><span class="line"><span class="ln" id="hl-6-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-14">14</a></span><span class="cl">      <span class="o">.</span><span class="na">build</span><span class="o">();</span>    <span class="c1">// WebTestClient ìƒì„±
</span></span></span><span class="line"><span class="ln" id="hl-6-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-15">15</a></span><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="ln" id="hl-6-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-16">16</a></span><span class="cl">  <span class="n">testClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;/design/recent&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-6-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-17">17</a></span><span class="cl">    <span class="o">.</span><span class="na">exchange</span><span class="o">()</span>    <span class="c1">// ê°€ì¥ ìµœê·¼ì˜ ê°ì²´ ìš”ì²­
</span></span></span><span class="line"><span class="ln" id="hl-6-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-18">18</a></span><span class="cl"><span class="c1"></span>    <span class="o">.</span><span class="na">expectStatus</span><span class="o">().</span><span class="na">isOk</span><span class="o">()</span>    <span class="c1">// ê¸°ëŒ€í•œ ì‘ë‹µì¸ì§€ ê²€ì‚¬
</span></span></span><span class="line"><span class="ln" id="hl-6-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-19">19</a></span><span class="cl"><span class="c1"></span>    <span class="o">.</span><span class="na">expectBody</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-6-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-20">20</a></span><span class="cl">      <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$&#34;</span><span class="o">).</span><span class="na">isArray</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-6-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-21">21</a></span><span class="cl">      <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$&#34;</span><span class="o">).</span><span class="na">isNotEmpty</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-6-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-22">22</a></span><span class="cl">      <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$[0].id&#34;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">tacos</span><span class="o">[</span><span class="n">0</span><span class="o">].</span><span class="na">getId</span><span class="o">().</span><span class="na">toString</span><span class="o">())</span>
</span></span><span class="line"><span class="ln" id="hl-6-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-23">23</a></span><span class="cl">      <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$[0].name&#34;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;Taco 1&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-6-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-24">24</a></span><span class="cl">      <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$[12]&#34;</span><span class="o">).</span><span class="na">doesNotExist</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-6-25"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-25">25</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>expectStatus() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì‘ë‹µì´ 200(OK) ìƒíƒœ ì½”ë“œë¥¼ ê°€ì§€ëŠ”ì§€ í™•ì¸í•œë‹¤. <br/>
jsonPath() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì‘ë‹µ ëª¸ì²´ì˜ JSONì´ ê¸°ëŒ€ê°’ì„ ê°€ì§€ëŠ”ì§€ ê²€ì‚¬í•œë‹¤.
<br/><br/></p>
<aside>
â— &nbsp;ì‘ë‹µì— JSON ë°ì´í„°ê°€ ë§ì•„ ë³µì¡í•œ ê²½ìš°ì—ëŠ” json() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤. 
<p><strong>json()</strong> : <span class="red">JSONì„ í¬í•¨í•˜ëŠ” Stringì„ ì¸ìë¡œ ë°›ì•„ ì‘ë‹µê³¼ ë¹„êµí•œë‹¤.</span></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-7-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-1"> 1</a></span><span class="cl"><span class="n">ClassPathResource</span> <span class="n">recentsResource</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathResource</span><span class="o">(</span><span class="s">&#34;/tacos/recent.json&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-7-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-2"> 2</a></span><span class="cl"><span class="n">String</span> <span class="n">recentsJson</span> <span class="o">=</span> <span class="n">StreamUtils</span><span class="o">.</span><span class="na">copyToString</span><span class="o">(</span>
</span></span><span class="line"><span class="ln" id="hl-7-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-3"> 3</a></span><span class="cl">    <span class="n">recentsResource</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="n">Charset</span><span class="o">.</span><span class="na">defaultCharset</span><span class="o">());</span>
</span></span><span class="line"><span class="ln" id="hl-7-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-4"> 4</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-7-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-5"> 5</a></span><span class="cl"><span class="n">testClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;/design/recent&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-7-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-6"> 6</a></span><span class="cl">  <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-7-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-7"> 7</a></span><span class="cl">  <span class="o">.</span><span class="na">exchange</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-7-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-8"> 8</a></span><span class="cl">  <span class="o">.</span><span class="na">expectStatus</span><span class="o">().</span><span class="na">isOk</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-7-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-9"> 9</a></span><span class="cl">  <span class="o">.</span><span class="na">expectBody</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-7-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-10">10</a></span><span class="cl">  <span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="n">recentsJson</span><span class="o">);</span>
</span></span></code></pre></div><p>recentsJsonì´ë¼ëŠ” JSON ì‘ë‹µì´ ë‹´ê¸´ String ê°’ì„ ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ ì˜¬ë°”ë¥¸ ì‘ë‹µì¸ì§€ í™•ì¸í•œë‹¤.
ë¦¬ìŠ¤íŠ¸ í˜•íƒœì˜ ì‘ë‹µì„ ë¹„êµí•  ìˆ˜ ìˆëŠ” <strong>expectBodyList()</strong> ë©”ì„œë“œë„ ì¡´ì¬í•œë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-8-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-1">1</a></span><span class="cl"><span class="n">testClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;/design/recent&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-8-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-2">2</a></span><span class="cl">  <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-8-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-3">3</a></span><span class="cl">  <span class="o">.</span><span class="na">exchange</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-8-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-4">4</a></span><span class="cl">  <span class="o">.</span><span class="na">expectStatus</span><span class="o">().</span><span class="na">isOk</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-8-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-5">5</a></span><span class="cl">  <span class="o">.</span><span class="na">expectBodyList</span><span class="o">(</span><span class="n">Taco</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-8-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-6">6</a></span><span class="cl">  <span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">tacos</span><span class="o">,</span> <span class="n">12</span><span class="o">));</span>
</span></span></code></pre></div><p>ì‘ë‹µì´ <span class="red">Listì— ì €ì¥ëœ 12ê°€ì§€ ìš”ì†Œë¥¼ ëª¨ë‘ í¬í•¨í•˜ëŠ”ì§€</span> ê²€ì‚¬í•˜ëŠ” ë¡œì§ì´ë‹¤.</p>
</aside>
<h3 id="post-ìš”ì²­-í…ŒìŠ¤íŠ¸">POST ìš”ì²­ í…ŒìŠ¤íŠ¸</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-9-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-1"> 1</a></span><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="ln" id="hl-9-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-2"> 2</a></span><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldSaveATaco</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-9-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-3"> 3</a></span><span class="cl">  <span class="n">TacoRepository</span> <span class="n">tacoRepo</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">TacoRepository</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-9-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-4"> 4</a></span><span class="cl">  <span class="n">Mono</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="n">unsavedTacoMono</span> <span class="o">=</span> <span class="n">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">testTaco</span><span class="o">(</span><span class="kc">null</span><span class="o">));</span>
</span></span><span class="line"><span class="ln" id="hl-9-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-5"> 5</a></span><span class="cl">  <span class="n">Taco</span> <span class="n">savedTaco</span> <span class="o">=</span> <span class="n">testTaco</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-9-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-6"> 6</a></span><span class="cl">  <span class="n">savedTaco</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">());</span>
</span></span><span class="line"><span class="ln" id="hl-9-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-7"> 7</a></span><span class="cl">  <span class="n">Mono</span><span class="o">&lt;</span><span class="n">Taco</span><span class="o">&gt;</span> <span class="n">savedTacoMono</span> <span class="o">=</span> <span class="n">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">savedTaco</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-9-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-8"> 8</a></span><span class="cl">  
</span></span><span class="line"><span class="ln" id="hl-9-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-9"> 9</a></span><span class="cl">  <span class="n">when</span><span class="o">(</span><span class="n">tacoRepo</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">any</span><span class="o">())).</span><span class="na">thenReturn</span><span class="o">(</span><span class="n">savedTacoMono</span><span class="o">);</span>  <span class="c1">// ëª¨ì˜ TestRepository
</span></span></span><span class="line"><span class="ln" id="hl-9-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-10">10</a></span><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="ln" id="hl-9-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-11">11</a></span><span class="cl">  <span class="n">WebTestClient</span> <span class="n">testClient</span> <span class="o">=</span> <span class="n">WebTestClient</span><span class="o">.</span><span class="na">bindToController</span><span class="o">(</span>  <span class="c1">// WebTestClient ìƒì„±
</span></span></span><span class="line"><span class="ln" id="hl-9-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-12">12</a></span><span class="cl"><span class="c1"></span>      <span class="k">new</span> <span class="n">DesignTacoController</span><span class="o">(</span><span class="n">tacoRepo</span><span class="o">)).</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-9-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-13">13</a></span><span class="cl">  
</span></span><span class="line"><span class="ln" id="hl-9-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-14">14</a></span><span class="cl">  <span class="n">testClient</span><span class="o">.</span><span class="na">post</span><span class="o">()</span>    <span class="c1">// post ì²˜ë¦¬
</span></span></span><span class="line"><span class="ln" id="hl-9-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-15">15</a></span><span class="cl"><span class="c1"></span>      <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;/design&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-9-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-16">16</a></span><span class="cl">      <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-9-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-17">17</a></span><span class="cl">      <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">unsavedTacoMono</span><span class="o">,</span> <span class="n">Taco</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-9-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-18">18</a></span><span class="cl">    <span class="o">.</span><span class="na">exchange</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-9-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-19">19</a></span><span class="cl">    <span class="o">.</span><span class="na">expectStatus</span><span class="o">().</span><span class="na">isCreated</span><span class="o">()</span>  <span class="c1">// ì‘ë‹µì„ ê²€ì‚¬í•œë‹¤
</span></span></span><span class="line"><span class="ln" id="hl-9-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-20">20</a></span><span class="cl"><span class="c1"></span>    <span class="o">.</span><span class="na">expectBody</span><span class="o">(</span><span class="n">Taco</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-9-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-21">21</a></span><span class="cl">      <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">savedTaco</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-9-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-22">22</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>post() ë©”ì„œë“œë¥¼ í†µí•´ POST ìš”ì²­ì„ ì œì¶œí•˜ê³  application/json íƒ€ì…ì˜ ëª¸ì²´ì™€ í˜ì´ë¡œë“œë¥¼ ê°™ì´ ì „ë‹¬í•œë‹¤.<br/>
exchange() ì‹¤í–‰ í›„ ì‘ë‹µì´ CREATED(201) ìƒíƒœ ì½”ë“œë¥¼ ê°€ì§€ëŠ”ì§€, ì‘ë‹µìœ¼ë¡œ ê°ì²´ì™€ ë™ì¼í•œ í˜ì´ë¡œë“œë¥¼ ê°€ì§€ëŠ”ì§€ ê²€ì‚¬í•œë‹¤.</p>
<h3 id="ì‹¤í–‰-ì¤‘ì¸-ì„œë²„ë¡œ-í…ŒìŠ¤íŠ¸">ì‹¤í–‰ ì¤‘ì¸ ì„œë²„ë¡œ í…ŒìŠ¤íŠ¸</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-10-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-1"> 1</a></span><span class="cl"><span class="nd">@RunWith</span><span class="o">(</span><span class="n">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-10-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-2"> 2</a></span><span class="cl"><span class="nd">@SpringBootTest</span><span class="o">(</span><span class="n">webEnvironment</span><span class="o">=</span><span class="n">WebEnvironment</span><span class="o">.</span><span class="na">RANDOM_PORT</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-10-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-3"> 3</a></span><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DesignTacoControllerWebTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-10-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-4"> 4</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-10-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-5"> 5</a></span><span class="cl">  <span class="nd">@Autowired</span>
</span></span><span class="line"><span class="ln" id="hl-10-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-6"> 6</a></span><span class="cl">  <span class="kd">private</span> <span class="n">WebTestClient</span> <span class="n">testClient</span><span class="o">;</span>
</span></span><span class="line"><span class="ln" id="hl-10-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-7"> 7</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-10-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-8"> 8</a></span><span class="cl">  <span class="nd">@Test</span>
</span></span><span class="line"><span class="ln" id="hl-10-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-9"> 9</a></span><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">shouldReturnRecentTacos</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-10-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-10">10</a></span><span class="cl">    <span class="n">testClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;/design/recent&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-10-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-11">11</a></span><span class="cl">      <span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">).</span><span class="na">exchange</span><span class="o">()</span>    <span class="c1">// ê°€ì¥ ìµœê·¼ì˜ ê°ì²´ ìš”ì²­
</span></span></span><span class="line"><span class="ln" id="hl-10-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-12">12</a></span><span class="cl"><span class="c1"></span>      <span class="o">.</span><span class="na">expectStatus</span><span class="o">().</span><span class="na">isOk</span><span class="o">()</span>    <span class="c1">// ê¸°ëŒ€í•œ ì‘ë‹µì¸ì§€ ê²€ì‚¬
</span></span></span><span class="line"><span class="ln" id="hl-10-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-13">13</a></span><span class="cl"><span class="c1"></span>      <span class="o">.</span><span class="na">expectBody</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-10-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-14">14</a></span><span class="cl">        <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$[?(@.id == &#39;TACO1&#39;)].name&#34;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;Carnivore&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-10-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-15">15</a></span><span class="cl">        <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$[?(@.id == &#39;TACO2&#39;)].name&#34;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;Bovine Bounty&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-10-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-16">16</a></span><span class="cl">        <span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&#34;$[?(@.id == &#39;TACO3&#39;)].name&#34;</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">&#34;Veg-out&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-10-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-17">17</a></span><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-10-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-18">18</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>WebTestClientì˜ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œëŠ” @RunWithì™€ @SpringBootTest ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì •í•´ì•¼ í•œë‹¤.</p>
<ul>
<li><code>WebEnvironment.RANDOM_PORT</code> : ë¬´ì‘ìœ„ë¡œ ì„ íƒëœ í¬íŠ¸ë¡œ ì‹¤í–‰ ì„œë²„ê°€ ë¦¬ìŠ¤ë‹í•˜ë„ë¡ ìš”ì²­</li>
</ul>
<p>ìë™ ì—°ê²°ë˜ëŠ” WebTestClientë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  í•„ìš”ê°€ ì—†ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.</p>
<h2 id="rest-api-ì‚¬ìš©">REST API ì‚¬ìš©</h2>
<hr>
<blockquote>
<p>RestTemplateì´ ì œê³µí•˜ëŠ” ëª¨ë“  ë©”ì„œë“œëŠ” ë„ë©”ì¸ íƒ€ì…ì´ë‚˜ ì»¬ë ‰ì…˜ íƒ€ì…ì„ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ 5ì—ì„œëŠ” RestTemplate ëŒ€ì‹  ë¦¬ì•¡í‹°ë¸Œ íƒ€ì…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëŒ€ì•ˆìœ¼ë¡œ <strong>WebClient</strong>ê°€ ì¡´ì¬í•œë‹¤.</p>
</blockquote>
<br/>
<p><strong>ì¼ë°˜ì ì¸ WebClient íŒ¨í„´</strong></p>
<ol>
<li>WebClient ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.</li>
<li>ìš”ì²­ì„ ì „ì†¡í•  HTTP ë©”ì„œë“œë¥¼ ì§€ì •í•œë‹¤.</li>
<li>ìš”ì²­ì— í•„ìš”í•œ URIì™€ í—¤ë”ë¥¼ ì§€ì •í•œë‹¤.</li>
<li>ìš”ì²­ì„ ì œì¶œí•œë‹¤.</li>
<li>ì‘ë‹µì„ ì‚¬ìš©í•œë‹¤.</li>
</ol>
<h3 id="get-ì‚¬ìš©">GET ì‚¬ìš©</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-11-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-1">1</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">ingredient</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-11-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-2">2</a></span><span class="cl">    <span class="o">.</span><span class="na">get</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-11-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-3">3</a></span><span class="cl">    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/ingredients/{id}&#34;</span><span class="o">,</span> <span class="n">ingredientId</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-11-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-4">4</a></span><span class="cl">    <span class="o">.</span><span class="na">retrive</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-11-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-5">5</a></span><span class="cl">    <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Ingredient</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// ë‹¨ì¼ ê°’
</span></span></span><span class="line"><span class="ln" id="hl-11-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-6">6</a></span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln" id="hl-11-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-7">7</a></span><span class="cl"><span class="n">ingredient</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="o">{});</span>
</span></span></code></pre></div><p>create() ë©”ì„œë“œë¡œ ìƒˆë¡œìš´ WebClient ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , get()ê³¼ uri()ë¥¼ í†µí•´ GET ìš”ì²­ì„ ì •ì˜í•œë‹¤.<br/>
bodyToMono() ë©”ì„œë“œ í˜¸ì¶œì„ í†µí•´ response bodyì˜ í˜ì´ë¡œë“œë¥¼ Mono<Ingredient>ë¡œ ì¶”ì¶œí•œë‹¤.</p>
<ul>
<li><code>bodyToMono()</code> : ë‹¨ì¼ ê°’ ë°˜í™˜ ìš”ì²­</li>
<li><code>bodyToFlux()</code> : ì»¬ë ‰ì…˜ ê°’ ë°˜í™˜ ìš”ì²­</li>
</ul>
<p><span class="gray">â€» Monoì— ì¶”ê°€ì ìœ¼ë¡œ ì˜¤í¼ë ˆì´ì…˜ì„ ì ìš©í•˜ë ¤ë©´ subscribe() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.</span><br/><br/></p>
<p><strong>ìš”ì²­ íƒ€ì„ì•„ì›ƒ</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-12-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-1">1</a></span><span class="cl"><span class="n">ingredients</span><span class="o">.</span><span class="na">timeout</span><span class="o">(</span><span class="n">Duration</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="n">1</span><span class="o">))</span>
</span></span><span class="line"><span class="ln" id="hl-12-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-2">2</a></span><span class="cl">  <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="o">{},</span> <span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="c1">// handle timeout error });
</span></span></span></code></pre></div><p>í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ì§€ì²´ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ <strong>timeout() ë©”ì„œë“œ</strong>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br/>
ê²½ê³¼ ì‹œê°„ì„ 1ì´ˆë¡œ ì§€ì •í•˜ì—¬ 1ì´ˆë³´ë‹¤ ì˜¤ë˜ ê±¸ë¦¬ë©´ íƒ€ì„ì•„ì›ƒì´ ë˜ì–´ <span class="red">subscribe ë‘ë²ˆì§¸ ì¸ìë¡œ ì§€ì •í•œ ì—ëŸ¬ í•¸ë“¤ëŸ¬ê°€ í˜¸ì¶œ</span>ëœë‹¤.</p>
<h3 id="ë¦¬ì†ŒìŠ¤-ì „ì†¡">ë¦¬ì†ŒìŠ¤ ì „ì†¡</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-13-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-1">1</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">ingredientMono</span><span class="o">=</span> <span class="o">...;</span>
</span></span><span class="line"><span class="ln" id="hl-13-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-2">2</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-13-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-3">3</a></span><span class="cl">    <span class="o">.</span><span class="na">post</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-13-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-4">4</a></span><span class="cl">    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/ingredients/&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-13-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-5">5</a></span><span class="cl">    <span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="n">ingredientMono</span><span class="o">,</span> <span class="n">Ingredient</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-13-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-6">6</a></span><span class="cl">    <span class="o">.</span><span class="na">retrive</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-13-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-7">7</a></span><span class="cl">    <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Ingredient</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> 
</span></span><span class="line"><span class="ln" id="hl-13-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-8">8</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="hl-13-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-9">9</a></span><span class="cl"><span class="n">result</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="o">{});</span>
</span></span></code></pre></div><p>post()ê³¼ uri()ë¥¼ í†µí•´ POST ìš”ì²­ì„ ì •ì˜í•˜ê³  body() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ Monoë¥¼ responsebodyì— í¬í•¨ì‹œí‚¨ë‹¤.<br/><br/></p>
<p><strong>ë„ë©”ì¸ ê°ì²´ ì „ì†¡</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-14-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-1">1</a></span><span class="cl"><span class="n">Ingredient</span> <span class="n">ingredient</span> <span class="o">=</span> <span class="o">...;</span>
</span></span><span class="line"><span class="ln" id="hl-14-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-2">2</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-14-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-3">3</a></span><span class="cl">    <span class="o">.</span><span class="na">post</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-14-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-4">4</a></span><span class="cl">    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/ingredients/&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-14-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-5">5</a></span><span class="cl">    <span class="o">.</span><span class="na">syncBody</span><span class="o">(</span><span class="n">ingredient</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-14-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-6">6</a></span><span class="cl">    <span class="o">.</span><span class="na">retrive</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-14-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-7">7</a></span><span class="cl">    <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Ingredient</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> 
</span></span></code></pre></div><p>Mono íƒ€ì… ëŒ€ì‹  ë„ë©”ì¸ ê°ì²´ë¥¼ responsebodyì— í¬í•¨ì‹œì¼œ ì „ì†¡í•˜ë ¤ë©´ <strong>syncBody() ë©”ì„œë“œ</strong>ë¥¼ ì‚¬ìš©í•œë‹¤.</p>
<h3 id="ë¦¬ì†ŒìŠ¤-ì‚­ì œ">ë¦¬ì†ŒìŠ¤ ì‚­ì œ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-15-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-15-1">1</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">ingredient</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-15-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-15-2">2</a></span><span class="cl">    <span class="o">.</span><span class="na">delete</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-15-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-15-3">3</a></span><span class="cl">    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/ingredients/{id}&#34;</span><span class="o">,</span> <span class="n">ingredientId</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-15-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-15-4">4</a></span><span class="cl">    <span class="o">.</span><span class="na">retrive</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-15-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-15-5">5</a></span><span class="cl">    <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Void</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-15-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-15-6">6</a></span><span class="cl">    <span class="o">.</span><span class="na">subscribe</span><span class="o">();</span>
</span></span></code></pre></div><p>DELETE ìš”ì²­ì€ ì‘ë‹µ í˜ì´ë¡œë“œë¥¼ ê°€ì§€ì§€ ì•Šê¸° ë•Œë¬¸ì— Mono<Void>ë¥¼ ë°˜í™˜í•˜ê³  subscribe()ë¡œ êµ¬ë…í•´ì•¼ í•œë‹¤.</p>
<h3 id="ì—ëŸ¬-ì²˜ë¦¬">ì—ëŸ¬ ì²˜ë¦¬</h3>
<p>ì—ëŸ¬ê°€ ìƒê¸¸ ìˆ˜ ìˆëŠ” Monoë‚˜ Fluxë¥¼ êµ¬ë…í•  ë•ŒëŠ” subscribe() ë©”ì„œë“œ ë‚´ì— ì—ëŸ¬ ì»¨ìŠˆë¨¸ë¥¼ ë“±ë¡í•  í•„ìš”ê°€ ìˆë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-16-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-1">1</a></span><span class="cl"><span class="n">ingredientMono</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span>
</span></span><span class="line"><span class="ln" id="hl-16-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-2">2</a></span><span class="cl">    <span class="n">ingredient</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-16-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-3">3</a></span><span class="cl">      <span class="c1">// ë°ì´í„° ì²˜ë¦¬
</span></span></span><span class="line"><span class="ln" id="hl-16-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-4">4</a></span><span class="cl"><span class="c1"></span>    <span class="o">},</span>
</span></span><span class="line"><span class="ln" id="hl-16-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-5">5</a></span><span class="cl">    <span class="n">error</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-16-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-6">6</a></span><span class="cl">      <span class="c1">// ì—ëŸ¬ ì²˜ë¦¬
</span></span></span><span class="line"><span class="ln" id="hl-16-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-16-7">7</a></span><span class="cl"><span class="c1"></span>    <span class="o">});</span>
</span></span></code></pre></div><p>404 ê°™ì€ ìƒíƒœ ì½”ë“œê°€ ë°˜í™˜ë˜ë©´ ë‘ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬ëœ ì—ëŸ¬ ì»¨ìŠˆë¨¸ê°€ ì‹¤í–‰ë˜ì–´ ê¸°ë³¸ì ìœ¼ë¡œ WebClientResponseExceptionì„ ë°œìƒì‹œí‚¨ë‹¤.<br/>
â†’ <strong>WebClientResponseException</strong> : <span class="red">êµ¬ì²´ì ì¸ ì˜ˆì™¸ë¥¼ ë‚˜íƒ€ë‚´ì§€ ì•Šê¸° ë•Œë¬¸ì— ì»¤ìŠ¤í…€ ì—ëŸ¬ í•¸ë“¤ëŸ¬ê°€ í•„ìš”!</span>
<br/><br/></p>
<p><strong>ì»¤ìŠ¤í…€ ì—ëŸ¬ í•¸ë“¤ëŸ¬ êµ¬í˜„</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-17-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-1">1</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">ingredient</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-17-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-2">2</a></span><span class="cl">    <span class="o">.</span><span class="na">get</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-17-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-3">3</a></span><span class="cl">    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/ingredients/{id}&#34;</span><span class="o">,</span> <span class="n">ingredientId</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-17-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-4">4</a></span><span class="cl">    <span class="o">.</span><span class="na">retrive</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-17-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-5">5</a></span><span class="cl">    <span class="o">.</span><span class="na">onStatus</span><span class="o">(</span><span class="n">HttpStatus</span><span class="o">::</span><span class="n">is4xxClientError</span><span class="o">,</span>
</span></span><span class="line"><span class="ln" id="hl-17-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-6">6</a></span><span class="cl">            <span class="n">response</span> <span class="o">-&gt;</span> <span class="n">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="k">new</span> <span class="n">UnknownIngredientException</span><span class="o">()))</span>
</span></span><span class="line"><span class="ln" id="hl-17-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-17-7">7</a></span><span class="cl">    <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Ingredient</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span></code></pre></div><p>HTTP ìƒíƒœ ì½”ë“œê°€ 400 ìˆ˜ì¤€ì˜ ìƒíƒœì½”ë“œì¼ ê²½ìš° UnknownIngredientExceptionì„ í¬í•¨í•˜ëŠ” Monoê°€ ë°˜í™˜ë˜ê³  ingredient ì‹¤í–‰ì´ ì‹¤íŒ¨í•˜ê²Œ ëœë‹¤.</p>
<h3 id="ìš”ì²­-êµí™˜">ìš”ì²­ êµí™˜</h3>
<p>retrieve() ë©”ì„œë“œëŠ” ResponseSpec íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ”ë°, <span class="ul">ì‘ë‹µì˜ í—¤ë”ë‚˜ ì¿ í‚¤ ê°’ì„ ì‚¬ìš©í•  ê²½ìš°</span>ì—ëŠ” ResponseSpec íƒ€ì…ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•œë‹¤.<br/>
ì´ ë‹¨ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ <strong>ClientResponse íƒ€ì…ì˜ Monoë¥¼ ë°˜í™˜</strong>í•˜ëŠ” exchange() ë©”ì„œë“œê°€ ì¡´ì¬í•˜ëŠ”ë°, (1) <span class="ul">ë¦¬ì•¡í‹°ë¸Œ ì˜¤í¼ë ˆì´ì…˜ì„ ì ìš©</span>í•˜ê±°ë‚˜, (2) <span class="ul">ì‘ë‹µì˜ ëª¨ë“  ë¶€ë¶„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</span><br/><br/></p>
<p><strong>ê¸°ë³¸ ì˜ˆì œ</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-18-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-1"> 1</a></span><span class="cl"><span class="n">Mono</span><span class="o">&lt;</span><span class="n">Ingredient</span><span class="o">&gt;</span> <span class="n">ingredient</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-18-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-2"> 2</a></span><span class="cl">    <span class="o">.</span><span class="na">get</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-18-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-3"> 3</a></span><span class="cl">    <span class="o">.</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/ingredients/{id}&#34;</span><span class="o">,</span> <span class="n">ingredientId</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-18-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-4"> 4</a></span><span class="cl">    <span class="o">.</span><span class="na">exchange</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-18-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-5"> 5</a></span><span class="cl">    <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">cr</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-18-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-6"> 6</a></span><span class="cl">      <span class="k">if</span> <span class="o">(</span><span class="n">cr</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">header</span><span class="o">(</span><span class="s">&#34;X-UNAVAILABLE&#34;</span><span class="o">).</span><span class="na">contains</span><span class="o">(</span><span class="s">&#34;true&#34;</span><span class="o">))</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-18-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-7"> 7</a></span><span class="cl">        <span class="k">return</span> <span class="n">Mono</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-18-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-8"> 8</a></span><span class="cl">      <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-18-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-9"> 9</a></span><span class="cl">      <span class="k">return</span> <span class="n">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">cr</span><span class="o">);</span>
</span></span><span class="line"><span class="ln" id="hl-18-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-10">10</a></span><span class="cl">    <span class="o">})</span>
</span></span><span class="line"><span class="ln" id="hl-18-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-18-11">11</a></span><span class="cl">    <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">cr</span> <span class="o">-&gt;</span> <span class="n">cr</span><span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">Ingredient</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</span></span></code></pre></div><p>â€œX-UNAVAILABLEâ€ í—¤ë”ê°€ ì¡´ì¬í•œë‹¤ë©´ ë¹„ì–´ìˆëŠ” Monoë¥¼ ë°˜í™˜í•˜ê³ , ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ClientResponseë¥¼ í¬í•¨í•˜ëŠ” ìƒˆë¡œìš´ Monoë¥¼ ë°˜í™˜í•œë‹¤.</p>
<h2 id="ë¦¬ì•¡í‹°ë¸Œ-ì›¹-api-ë³´ì•ˆ">ë¦¬ì•¡í‹°ë¸Œ ì›¹ API ë³´ì•ˆ</h2>
<hr>
<blockquote>
<p>ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ìŠ¤í”„ë§ MVCì™€ ë¦¬ì•¡í‹°ë¸Œ ìŠ¤í”„ë§ WebFlux ì–´í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì´ë¥¼ ë„ì™€ì£¼ëŠ” ê²ƒì´ ìŠ¤í”„ë§ <strong>WebFilter</strong>ì´ë‹¤.</p>
<ul>
<li>WebFilter : ì„œë¸”ë¦¿ APIì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ìŠ¤í”„ë§ì˜ ì„œë¸”ë¦¿ í•„í„°</li>
</ul>
</blockquote>
<h3 id="ë¦¬ì•¡í‹°ë¸Œ-ì›¹-ë³´ì•ˆ-êµ¬ì„±">ë¦¬ì•¡í‹°ë¸Œ ì›¹ ë³´ì•ˆ êµ¬ì„±</h3>
<p>ìŠ¤í”„ë§ WebFluxì—ì„œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ êµ¬ì„±í•˜ëŠ” ì½”ë“œì´ë‹¤.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-19-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-1"> 1</a></span><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="ln" id="hl-19-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-2"> 2</a></span><span class="cl"><span class="nd">@EnableWebFluxSecurity</span>
</span></span><span class="line"><span class="ln" id="hl-19-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-3"> 3</a></span><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-19-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-4"> 4</a></span><span class="cl">  <span class="nd">@Bean</span>
</span></span><span class="line"><span class="ln" id="hl-19-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-5"> 5</a></span><span class="cl">  <span class="kd">public</span> <span class="n">SecurityWebFilterChain</span> <span class="nf">securityWebFilterChain</span><span class="o">(</span><span class="n">ServerHttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-19-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-6"> 6</a></span><span class="cl">    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="na">authorizeExchange</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-19-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-7"> 7</a></span><span class="cl">        <span class="o">.</span><span class="na">pathMatchers</span><span class="o">(</span><span class="s">&#34;/design&#34;</span><span class="o">,</span> <span class="s">&#34;/orders&#34;</span><span class="o">).</span><span class="na">hasAuthority</span><span class="o">(</span><span class="s">&#34;USER&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="ln" id="hl-19-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-8"> 8</a></span><span class="cl">        <span class="o">.</span><span class="na">anyExchange</span><span class="o">().</span><span class="na">permitAll</span><span class="o">()</span>
</span></span><span class="line"><span class="ln" id="hl-19-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-9"> 9</a></span><span class="cl">        <span class="o">.</span><span class="na">and</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-19-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-10">10</a></span><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-19-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-19-11">11</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>ìŠ¤í”„ë§ MVCì™€ ë‹¤ë¥´ê²Œ @EnableWebSecurity ëŒ€ì‹  <span class="red">@EnableWebFluxSecurityê°€ ì§€ì •</span>ë˜ì–´ ìˆë‹¤. ë˜í•œ ì¸ìë¡œ HttpSecurity ëŒ€ì‹  <span class="red">SecurityHttpSecurityë¥¼ ì‚¬ìš©</span>í•´ì„œ authorizeExchange()ë¥¼ í˜¸ì¶œí•˜ì˜€ë‹¤.<br/>
ì¤‘ìš”í•œ ì ì€ í”„ë ˆì„ì›Œí¬ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ëŠ” ëŒ€ì‹  <strong>build() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ëª¨ë“  ë³´ì•ˆ ê·œì¹™ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.</strong><br/><br/></p>
<p><strong>ReactiveUserDetailsService êµ¬í˜„</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="ln" id="hl-20-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-1"> 1</a></span><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="ln" id="hl-20-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-2"> 2</a></span><span class="cl"><span class="kd">public</span> <span class="n">ReactiveUserDetailsService</span> <span class="nf">userDetailsService</span><span class="o">(</span><span class="n">UserRepository</span> <span class="n">userRepo</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-20-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-3"> 3</a></span><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">ReactiveUserDetailsService</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-20-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-4"> 4</a></span><span class="cl">        <span class="nd">@Override</span>
</span></span><span class="line"><span class="ln" id="hl-20-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-5"> 5</a></span><span class="cl">        <span class="kd">public</span> <span class="n">Mono</span><span class="o">&lt;</span><span class="n">UserDetails</span><span class="o">&gt;</span> <span class="nf">findByUsername</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-20-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-6"> 6</a></span><span class="cl">            <span class="k">return</span> <span class="n">userRepo</span><span class="o">.</span><span class="na">findByUsername</span><span class="o">(</span><span class="n">username</span><span class="o">).</span><span class="na">map</span><span class="o">(</span><span class="n">user</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="ln" id="hl-20-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-7"> 7</a></span><span class="cl">                <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="na">toUserDetails</span><span class="o">();</span>
</span></span><span class="line"><span class="ln" id="hl-20-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-8"> 8</a></span><span class="cl">            <span class="o">});</span>
</span></span><span class="line"><span class="ln" id="hl-20-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-9"> 9</a></span><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="ln" id="hl-20-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-10">10</a></span><span class="cl">    <span class="o">};</span>
</span></span><span class="line"><span class="ln" id="hl-20-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-20-11">11</a></span><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>userDetailsServiceì˜ ë¦¬ì•¡í‹°ë¸Œ ë²„ì „ì¸ ReactiveUserDetailsService ë¹ˆì„ ì„ ì–¸í•˜ì˜€ë‹¤.<br/>
<code>userRepo.findByUsername()</code> ì—ì„œ ë°˜í™˜ëœ Monoê°€ ë°œí–‰í•˜ëŠ” User ê°ì²´ì˜ toUserDetails() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ <span class="red">User ê°ì²´ë¥¼ UserDetails ê°ì²´ë¡œ ë³€í™˜</span>í•œë‹¤.</p>



<h3>Posts in this Series</h3>
<ul>
  
    <li><a href="/post/spring/spring-jmx/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] JMXë¡œ ìŠ¤í”„ë§ ëª¨ë‹ˆí„°ë§</a></li>

  
    <li><a href="/post/spring/spring-boot-admin-basic/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ìŠ¤í”„ë§ ê´€ë¦¬</a></li>

  
    <li><a href="/post/spring/spring-actuator/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ìŠ¤í”„ë§ ì•¡ì¶”ì—ì´í„° ì‚¬ìš©</a></li>

  
    <li><a href="/post/spring/spring-circuit-breaker/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ì‹¤íŒ¨ì™€ ì§€ì—° ì²˜ë¦¬</a></li>

  
    <li><a href="/post/spring/spring-cloud-config/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] í´ë¼ìš°ë“œ êµ¬ì„± ê´€ë¦¬</a></li>

  
    <li><a href="/post/spring/spring-microservice/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì´í•´</a></li>

  
    <li><a href="/post/spring/spring-reactive-data-persistence/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ ë°ì´í„° í¼ì‹œìŠ¤í„´ìŠ¤</a></li>

  
    <li><a href="/post/spring/spring-reactive-api/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í‹°ë¸Œ API ê°œë°œ</a></li>

  
    <li><a href="/post/spring/spring-reactor/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¦¬ì•¡í„° ê°œìš”</a></li>

  
    <li><a href="/post/spring/spring-integration/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ìŠ¤í”„ë§ í†µí•© í”Œë¡œìš° ì‚¬ìš©</a></li>

  
    <li><a href="/post/spring/spring-messaging-kafka/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¹„ë™ê¸° ë©”ì‹œì§€ ì „ì†¡í•˜ê¸° - Kafka</a></li>

  
    <li><a href="/post/spring/spring-messaging-rabbitmq/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¹„ë™ê¸° ë©”ì‹œì§€ ì „ì†¡í•˜ê¸° - RabbitMQ</a></li>

  
    <li><a href="/post/spring/spring-messaging-jms/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë¹„ë™ê¸° ë©”ì‹œì§€ ì „ì†¡í•˜ê¸° - JMS</a></li>

  
    <li><a href="/post/spring/spring-use-restapi/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] REST API ì‚¬ìš©í•˜ê¸°</a></li>

  
    <li><a href="/post/spring/spring-add-restapi/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] REST API ìƒì„±í•˜ê¸°</a></li>

  
    <li><a href="/post/spring/spring-config/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] êµ¬ì„± ì†ì„± ì‚¬ìš©</a></li>

  
    <li><a href="/post/spring/spring-security/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ìŠ¤í”„ë§ ì‹œíë¦¬í‹°</a></li>

  
    <li><a href="/post/spring/spring-db/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ë°ì´í„°ë¡œ ì‘ì—…í•˜ê¸°</a></li>

  
    <li><a href="/post/spring/spring-basic/">[ìŠ¤í”„ë§ì¸ì•¡ì…˜] ìŠ¤í”„ë§ ì´ˆê¸° ì„¤ì •</a></li>

  
</ul>


<div class="related">
  <div class="related--list">
    
      
        <a href="/post/spring/spring-persistence-context/"><span><i class="fa-solid fa-angle-left"></i>ì´ì „ ê²Œì‹œë¬¼</span> <p>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(persistence context)ì˜ ê°œë…</p></a>
      

    
      
        <a href="/post/spring/spring-jmx/"><span>ë‹¤ìŒ ê²Œì‹œë¬¼<i class="fa-solid fa-angle-right"></i></span> <p>[ìŠ¤í”„ë§ì¸ì•¡ì…˜] JMXë¡œ ìŠ¤í”„ë§ ëª¨ë‹ˆí„°ë§</p></a>
      

    
  </div>
</div>

</div>
    <div class="post__footer">
      
        <span><a class="category" href="/categories/web/">Web</a></span>





      

      
        <span><a class="tag" href="/tags/spring/">spring</a><a class="tag" href="/tags/web/">web</a><a class="tag" href="/tags/java/">java</a><a class="tag" href="/tags/spring-boot/">spring boot</a></span>




      
    </div>

    
  </div>

  <script>
    const toc = document.getElementById('tableOfContent');

    const displayTocFromSize = function () {
      if (window.innerWidth >= 1520) {        
        toc.style.display = "block";
      } 
      else {
        toc.style.display = "none";  
      }
    }

    displayTocFromSize();
    window.addEventListener('resize', displayTocFromSize);

    var link = document.querySelectorAll('a[href*="#"]')

    for (i = 0; i < link.length; i++) {
      link[i].addEventListener('click', function(e) {
        e.preventDefault();
        let id = decodeURI(this.href.split('/')[6].split('#')[1]);
        const target = document.getElementById(id);

        window.scrollTo({ top: target.offsetTop - 80, behavior: "smooth" });
      });
    }
    
  </script>


      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        lhj8390
        2023


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.972a2c29b7a36a3c40cc4798c8fab0dbae92c1089ab0691e84acbf0c7720ccb3.js"
    integrity="sha256-lyosKbejajxAzEeYyPqw266SwQiasGkehKy/DHcgzLM="
    crossorigin="anonymous"
  ></script></body>
  <script>
    const searchWrapper = document.getElementById('searchWrapper');
  
    const openSearchPopup = function (e) {
      window.scrollTo(0, 0);
      if (document.getElementById('searchInput') === e.target || document.getElementById('searchbox') === e.target)
        return;
      
      if (searchWrapper.style.display == 'none') {
        searchWrapper.style.display = 'block';
        document.getElementsByClassName('body')[0].style.overflow = 'hidden';

      }
      else {
        searchWrapper.style.display = 'none';
        document.getElementsByClassName('body')[0].style.overflow = 'auto';
      }
    }

    const openMenu = function (el) {
      console.log(el);
      el.nextElementSibling.classList.toggle('expand--open');
    }

    const expands = document.querySelectorAll('.expand__list');
    for (i = 0; i < expands.length; i++) {
      const nodes = expands[i].children;
      const icon = expands[i].previousElementSibling.lastElementChild;

      for (j = 0; j < nodes.length; j++) {
        if (nodes[j].classList.contains('watched')) {
          icon.classList.add('up');
          icon.classList.add('down');
          expands[i].classList.add('expand--open');
          break;
        }
      }
      
    }
    
  </script>
</html>
